@model ProjectBase.Web.Models.ProjectIndexViewModel
@using ProjectBase.Web.Helpers

@{
    ViewBag.Title = "Проекты";
}

<h2>Проекты</h2>

<p>
    @Html.ActionLink("Создать проект", "Create")
</p>

<form method="get">
    <div class="form-inline">
        <label class="control-label">Заказчик</label>
        @Html.DropDownList("customer", Model.Customers as SelectList,
                    htmlAttributes: new { @class = "form-control" })
    </div>
    <div class="form-inline">
        <label class="control-label">Исполнитель</label>
        @Html.DropDownList("performer", Model.Performers as SelectList,
                    htmlAttributes: new { @class = "form-control" })
    </div>
    <div class="form-inline">
        <label class="control-label">Руководитель</label>
        @Html.DropDownList("chief", Model.Chiefs as SelectList,
                    htmlAttributes: new { @class = "form-control" })
        <input type="submit" value="Фильтр" class="btn btn-default" />
    </div>
</form>

@if (Model.Projects.Count() != 0)
{
    <p>
        Найдено @Model.Projects.Count()
    </p>

    <table class="table">
        <tr>
            <th>Название</th>
            <th>Заказчик</th>
            <th>Исполнитель</th>
            <th>Руководитель</th>
        </tr>

        @foreach (var item in Model.Projects)
        {
            <tr>
                <td>
                    @Html.ActionLink(item.Name, "Details", new { Id = item.Id })
                </td>
                <td>
                    @item.CompanyCustomer.Name
                </td>
                <td>
                    @item.CompanyPerformer.Name
                </td>
                <td>
                    @Html.ActionLink(item.ProjectChief.SecondName, "Details", "Employee", new { Id = item.ProjectChief.Id }, null)
                </td>
            </tr>
        }

    </table>

    <br />
    <div class="btn-group">
        @Html.PageLinks(Model.PageModel, x => Url.Action("List", new { page = x }))
    </div>
}
else
{
    @:нет проектов
}

